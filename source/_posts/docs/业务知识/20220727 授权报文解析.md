---
title: 授权报文解析
date: 2022-07-27 15:09:00
categories:
- 总结

tags:
- work
- vuejs
- fox
---

# 授权报文解析

## 一、远程授权

### 第一次

#### 1、请求头

```json
========================commit提交===============================
{
    "sysHead": {
        // 渠道类型 综合前端 TM 柜面 TE 固定
        "channel": "TM",
        // 渠道号
        "channelSeq": "",
        "operType": "",
        "langCode": "zh_cn",
        "pageNum": 1,
        "pageSize": 10
    },
    "tradeHead": {
        // -- 具体交易具体填写类型 固定字段 交易选择 --
        // 交易类型 01 非账务流水 99 其他
        "tradeType": "01",
        // 交易类别 01 单笔交易 02 组合交易
        "tradeCls": "01",
        // 交易方式 1 无纸 2 有纸
        "tradeMode": "0",
        // 打印场景
        "printScene": {
            // 该交易是否支持补打 0 不支持 1 支持
            "isReprint": "0"
        },
        
        "authInfo": {
           	//【静态授权（集中运营）】 授权要点 交易传（一级结构）
            // 授权要素 需注意点：
            // - 传值注意点
            // 1、是否标红 "0|xxx" 或 "xxx" 不标红 "1|xxx" 标红
            // 2、枚举类型传值 "01 支付" ？？？待确认
            // - key值注意点：
            // 1、要素字段 key值 需要【集中运营】 配制
            // 2、authPoints 为 object 类型
            // 3、authPoints 里的 key值 需与【集中运营】配制的一致，大小写敏感。  
            // 4、【集中运营】配制 要素 :
            //	{
            //		"eleCode": "ActName", // 字段key
            //		"eleName": "户名", // 字段名
            //		"fieldType": "text", // 数据类型
            //		"serialNo": "002", // 排序
            //		"isShow": "" // 是否显示
          	//}
            // 4、数据类型 fileType: array 数组类型 money 金额 txt 文本  默认：txt
            // 5、是否显示 isShow 0 不展示 其他值展示？？？需确认
            "authPoints": {
                "appPushType": "0",
                "rejectId": "0",
                "clickActBody": "",
                "updateTime": 1657614238000,
                "priority": 5,
                "isDisplay": "2",
                "clickMsgBody": ""
            }
        },
        
        // -- 系统自动获取 --
        // 交易码 菜单里获取
        "tradeCode": "D00001",
        // 交易名称 菜单里获取
        "tradeName": "快捷推送列表查询",
        // 工作时间 壳里自动灌入，登录时获取；浏览器 需要手动造一个 
        //fox.sessionStorage.set('workDate','2022-07-27')
        "workDate": "2022-07-18",
        // 柜员 机构id
        "orgId": "801000",
        // 柜员 id
        "userId": "8010156",
        // 交易页面路由
        "routePath": "fox-test/manager/index",
        // 提交类型 第一提交 commit 第二次提交 submit
        "submitFlag": "commit",
    },
    // 交易数据
    "body": {
        "clickMsgType": "1",
        "busiId": "11d0057dc6c7487c803f61991bea50f3",
        "frontDisType": "2",
        "channelType": "EMAIL",
        "templateCode": "EXXXNASTEST00001",
        "templateId": "EXXXNASTEST00001001",
        "title": "对账单邮件发送",
        "isSync": "1",
        "touchSystem": "52add72732234a98af2d1865a33dfc8d",
        "labelId": "0",
        "displayContent": "亲情钱包确认提醒",
        "clickActType": "1",
        "draft": 1,
        "appId": "78563531c3134032829b85e3ae1b2e55",
        "templateContent": "remote",
        "appPushType": "0",
        "rejectId": "0",
        "clickActBody": "",
        "updateTime": 1657614238000,
        "priority": 5,
        "isDisplay": "2",
        "clickMsgBody": "",
        "versions": "001",
        "templateName": "对账单邮件发送",
        "createTime": 1657614238000,
        "sendType": "1",
        "auditStatus": "1",
        "createUser": "9990053",
        "applyId": "1111",
        "emailId": "1"
    }
}
```

#### 2、响应报文

```json
{
    "body": {
        "videoScene": {
            "isVideo": "0"
        },
        // 影像目录树
        "imgDirs": [
            {
                // 场景码
                "SceneCode": "0000000073",
                // 序号号
                "VideoNo": "10087",
                // 影像节点
                "ImageNode": "10067",
                // 中文描述
                "ChineseDesc": "客户人脸影像",
                // 是否必输 1 是	0 否
                "IsEntry": "0",
                // 是否OCR比对
                "IsOCR": "0"
            },
            {
                "SceneCode": "0000000073",
                "VideoNo": "ZZZZZ",
                "ImageNode": "10049",
                "ChineseDesc": "其他",
                "IsEntry": "0",
                "IsOCR": "0"
            }
        ],
        // 事件信息
        "ruleEvents": [
            {
                // 授权级别
                "authLevel": 11,
                // 授权模式  authMode 1 本地 6 本地＋远程 7 远程 8 集中审核 9 集中复合
                "authMode": "7",
                // 授权 authCategory 0 不授权 1 静态授权（集中运营） 2 动态授权（核心授权）
                "authCategory": "1",
                // 事件类型 4 授权
                "eventType": "4"
            }
        ],
        // OCR信息
        "ocrScene": {
            "clickMsgType": "1",
            "busiId": "11d0057dc6c7487c803f61991bea50f3",
            "frontDisType": "2",
            "channelType": "EMAIL",
            "emailId": "1",
            "templateCode": "EXXXNASTEST00001",
            "templateId": "EXXXNASTEST00001001",
            "title": "对账单邮件发送",
            "isSync": "1",
            "applyId": "1111",
            "touchSystem": "52add72732234a98af2d1865a33dfc8d",
            "labelId": "0",
            "displayContent": "亲情钱包确认提醒",
            "clickActType": "1",
            "draft": 1,
            "appId": "78563531c3134032829b85e3ae1b2e55",
            "templateContent": "remote",
            "appPushType": "0",
            "rejectId": "0",
            "clickActBody": "",
            "updateTime": 1657614238000,
            "priority": 5,
            "isDisplay": "2",
            "clickMsgBody": "",
            "versions": "001",
            "templateName": "对账单邮件发送",
            "createTime": 1657614238000,
            "sendType": "1",
            "auditStatus": "1",
            "createUser": "9990053"
        },
        // 交易流水
        "tradeSerialNo": "U80101560027"
    },
    "head": {
        // 全局流水号
        "globalSeq": "G2022072617364200000120",
        "responseCode": "200",
        "responseDate": "2022-07-26 17:36:42",
        "responseMes": "操作成功!",
        "totalSize": -1
    }
}
```

### 第二次

#### 1、请求

```json
========================submit提交===============================

{
    "sysHead": {
        // 授权模式查询返回啥直接丢进去即可
        // 全局流水号 上游接口获取
        "globalSeq": "G2022072615461200000118",
        // 渠道类型 综合前端固定 TM
        "channel": "TM",
        // 渠道号
        "channelSeq": "",
        "operType": "",
        "langCode": "zh_cn",
        "pageNum": 1,
        "pageSize": 10
    },
    "tradeHead": {
                
       // -- 具体交易具体填写类型 固定字段 交易选择 --
        // 交易类型 01 非账务流水 99 其他
        "tradeType": "01",
        // 交易类别 01 单笔交易 02 组合交易
        "tradeCls": "01",
        // 交易方式 1 无纸 2 有纸
        "tradeMode": "0",
        
        "printScene": {
            "isReprint": "0"
        },
        
        "authInfo": {
           	// 授权 authType 0 不授权 1 静态授权（集中运营） 2 核心授权
            "authCategory": "1",
            // 授权模式  authMode 1 本地 6 本地＋远程 7 远程
            "authMode": "7",
            // 授权级别
            "authLevel": "11",
            
           // 【静态授权（集中运营）】 授权要点 交易传（一级结构）
            // 授权要素 需注意点：
            // - 传值注意点
            // 1、是否标红 "0|xxx" 或 "xxx" 不标红 "1|xxx" 标红
            // 2、枚举类型传值 "01 支付" ？？？待确认
            // - key值注意点：
            // 1、要素字段 key值 需要【集中运营】 配制
            // 2、authPoints 为 object 类型
            // 3、authPoints 里的 key值 需与【集中运营】配制的一致，大小写敏感。  
            // 4、【集中运营】配制 要素 :
            //	{
            //		"eleCode": "ActName", // 字段key
            //		"eleName": "户名", // 字段名
            //		"fieldType": "text", // 数据类型
            //		"serialNo": "002", // 排序
            //		"isShow": "" // 是否显示
          	//}
            // 4、数据类型 fileType: array 数组类型 money 金额 txt 文本  默认：txt
            // 5、是否显示 isShow 0 不展示 其他值展示？？？需确认
            "authPoints": {
                "appPushType": "0",
                "rejectId": "0",
                "clickActBody": "",
                "updateTime": 1657614238000,
                "priority": 5,
                "isDisplay": "2",
                "clickMsgBody": ""
            },
            // 【核心授权】 授权要点 交易传
            "coreAuthPoints": [],
            // 【本地授权】授权人员信息
            "authUsers": [
                {
                    "centerNo": "",
                    // 授权柜员 机构id
                    "orgId": "801000",
                    // 授权柜员 柜员id
                    "userId": "8010096",
                    // 授权柜员 授权级别
                    "userLevel": "11"
                }
            ]
        },
        
        // -- 系统自动获取 -- 
         // 交易码 菜单里获取
        "tradeCode": "D00001",
        // 交易名称 菜单里获取
        "tradeName": "快捷推送列表查询",
        // 工作时间 壳里自动灌入，登录时获取；浏览器 需要手动造一个 
        //fox.sessionStorage.set('workDate','2022-07-27')
        "workDate": "2022-07-18",
        // 交易流水号 上游接口获取
        "tradeSerialNo": "U80101560026",
        // 柜员 机构id
        "orgId": "801000",
        // 柜员 id
        "userId": "8010156",
        // 交易页面路由
        "routePath": "fox-test/manager/index",
        // 提交类型 第一提交 commit 第二次提交 submit
        "submitFlag": "submit",
        
        // -- 上游接口获取 -- 
        // 影像流水号
        "imgSerialNo": "AR000000000000",
        
        // 授权模式查询返回啥直接丢进去即可
        // 影像目录树
        "imgDirs": [
            {
                // 场景码
                "SceneCode": "0000000073",
                // 序号号
                "VideoNo": "10087",
                // 影像节点
                "ImageNode": "10067",
                // 中文描述
                "ChineseDesc": "客户人脸影像",
                // 是否必输 1 是	0 否
                "IsEntry": "0",
                // 是否OCR比对
                "IsOCR": "0"
            },
            {
                "chineseDesc": "其他",
                "imageNode": "10049",
                "isEntry": "0",
                "isOCR": "0",
                "sceneCode": "0000000073",
                "videoNo": "ZZZZZ"
            }
        ],
        // 交易来传（一级结构）
         // 授权模式查询返回啥直接丢进去即可
        "videoScene": {
            "isVideo": "0"
        },
        // 授权模式查询返回啥直接丢进去即可
        "ocrScene": {
            "clickMsgType": "1",
            "busiId": "11d0057dc6c7487c803f61991bea50f3",
            "frontDisType": "2",
            "channelType": "EMAIL",
            "emailId": "1",
            "templateCode": "EXXXNASTEST00001",
            "templateId": "EXXXNASTEST00001001",
            "title": "对账单邮件发送",
            "isSync": "1",
            "applyId": "1111",
            "touchSystem": "52add72732234a98af2d1865a33dfc8d",
            "labelId": "0",
            "displayContent": "亲情钱包确认提醒",
            "clickActType": "1",
            "draft": 1,
            "appId": "78563531c3134032829b85e3ae1b2e55",
            "templateContent": "remote",
            "appPushType": "0",
            "rejectId": "0",
            "clickActBody": "",
            "updateTime": 1657614238000,
            "priority": 5,
            "isDisplay": "2",
            "clickMsgBody": "",
            "versions": "001",
            "templateName": "对账单邮件发送",
            "createTime": 1657614238000,
            "sendType": "1",
            "auditStatus": "1",
            "createUser": "9990053"
        }
    },
    // 交易数据
    "body": {
        "clickMsgType": "1",
        "busiId": "11d0057dc6c7487c803f61991bea50f3",
        "frontDisType": "2",
        "channelType": "EMAIL",
        "templateCode": "EXXXNASTEST00001",
        "templateId": "EXXXNASTEST00001001",
        "title": "对账单邮件发送",
        "isSync": "1",
        "touchSystem": "52add72732234a98af2d1865a33dfc8d",
        "labelId": "0",
        "displayContent": "亲情钱包确认提醒",
        "clickActType": "1",
        "draft": 1,
        "appId": "78563531c3134032829b85e3ae1b2e55",
        "templateContent": "remote",
        "appPushType": "0",
        "rejectId": "0",
        "clickActBody": "",
        "updateTime": 1657614238000,
        "priority": 5,
        "isDisplay": "2",
        "clickMsgBody": "",
        "versions": "001",
        "templateName": "对账单邮件发送",
        "createTime": 1657614238000,
        "sendType": "1",
        "auditStatus": "1",
        "createUser": "9990053",
        "applyId": "1111",
        "emailId": "1"
    }
}
```

#### 2、响应

```json
{
    "head": {
        "responseCode": "200",
        "responseDate": "2022-07-26 17:37:59",
        "responseMes": "集中授权任务发起成功!",
        "totalSize": -1
    }
}
```